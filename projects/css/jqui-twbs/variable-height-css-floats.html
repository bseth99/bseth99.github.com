<!Doctype html>
<html>
<head>
   <meta charset="utf-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">

   <title>Variable Height CSS Floats</title>
   <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootstrap/3.0.3/css/bootstrap.min.css">

   <script src="http://code.jquery.com/jquery.js"></script>

</head>
<body>

<style>
body {
   font-family: sans-serif,arial;
}

#main {
   position: relative;
}

</style>

<br/><br/>

<div class="container">
   <div id="main">

      <h3>Variable Height CSS Floats</h3>
      <div style="position: absolute; top: 5px; right: 0; height: 30px">
        <span><a href="../index.html">&lt; Back</a></span>&nbsp;&nbsp;
        <span><a href="http://www.benknowscode.com/2013/12/working-with-variable-height-css-floats.html">View Blog</a></span>&nbsp;&nbsp;
        <span><a href="https://github.com/bseth99/sandbox/blob/master/projects/css/jqui-twbs/variable-height-css-floats.html">View Source</a></span>&nbsp;&nbsp;
        <div class="g-plusone" data-size="small"></div>
      </div>

      <!-- Place this tag after the last +1 button tag. -->
      <script type="text/javascript">
        (function() {
          var po = document.createElement('script'); po.type = 'text/javascript'; po.async = false;
          po.src = 'https://apis.google.com/js/plusone.js';
          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
        })();
      </script>
   </div>


   <div class="panel panel-default">
      <div class="panel-body">
         The panels below are contained and positioned in the Bootstrap grid system creating a 3 column layout.
         Instead of creating new row containers, all of the col-* elements are in one row parent and allowed
         to naturally flow to the next line based on the applied float style.  However, the variable height
         panels cause issues with the floating element consistently flowing to the beginning of each row.  The
         solution was to add a little Javascript to find the max height on each row and set each col-* element's
         height so the rows appeared top aligned and flow properly.  Resize the window to see the heights recalculated
         and eventually removed once the media breakpoint is reached which causes all the elements to be on their own
         line.
      </div>
   </div>


   <div class="row tiles">

      <div class="col-sm-4">
         <div class="panel panel-default">
            <div class="panel-body">
              Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
            </div>
         </div>
      </div>

      <div class="col-sm-4">
         <div class="panel panel-default">
            <div class="panel-body">
              Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.  Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
            </div>
         </div>
      </div>

      <div class="col-sm-4">
         <div class="panel panel-default">
            <div class="panel-body">
              Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.
            </div>
         </div>
      </div>

      <div class="col-sm-4">
         <div class="panel panel-default">
            <div class="panel-body">
              Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.
            </div>
         </div>
      </div>

      <div class="col-sm-4">
         <div class="panel panel-default">
            <div class="panel-body">
              Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
            </div>
         </div>
      </div>

      <div class="col-sm-4">
         <div class="panel panel-default">
            <div class="panel-body">
              Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
            </div>
         </div>
      </div>

      <div class="col-sm-4">
         <div class="panel panel-default">
            <div class="panel-body">
              Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
            </div>
         </div>
      </div>

      <div class="col-sm-4">
         <div class="panel panel-default">
            <div class="panel-body">
              Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.
            </div>
         </div>
      </div>

      <div class="col-sm-4">
         <div class="panel panel-default">
            <div class="panel-body">
              Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
            </div>
         </div>
      </div>

   </div>

</div>
<br/><br/>


<script>

function fitRows( $container, options ) {

   var cols = options.numColumns,
       $els = $container.children(),
       maxH = 0, j,
       doSize;

   doSize = ( $container.width() != $els.outerWidth(true) );

   $els.each(function( i, p ) {

      var $p = $( p ), h;

      $p.css( 'min-height', '' );
      if ( !doSize ) return;

      maxH = Math.max( $p.outerHeight( true ) + 1, maxH );
      if ( i % cols == cols - 1 || i == cols - 1 ) {
         for ( j=cols;j;j--) {
            $p.css( 'min-height', maxH );
            $p = $p.prev();
         }
         maxH = 0;
      }
   });
}

$(function() {

   var opts = {
      numColumns: 3
   };

   fitRows( $( '.tiles' ), opts );

   $( window ).on( 'resize', function() {
      fitRows( $( '.tiles' ), opts );
   });
});
</script>

<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-34780028-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

</body>
</html>